{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{getLists,deleteMovieFromList}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListDetails=()=>{const{id}=useParams();const[list,setList]=useState(null);useEffect(()=>{const fetchLists=async()=>{const data=await getLists();const selectedList=data.find(l=>l._id===id);setList(selectedList);};fetchLists();},[id]);const handleDeleteMovie=async movieId=>{try{await deleteMovieFromList(id,movieId);const updatedList={...list};// Create a copy of the current list\nupdatedList.movies=updatedList.movies.filter(movie=>movie.imdbID!==movieId);// Remove the movie from the list\nsetList(updatedList);// Update the state with the updated list\nwindow.alert(\"Deleted\");}catch(error){console.error('Failed to delete movie:',error);window.alert('Failed to delete movie');}};if(!list)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 grid justify-center \",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl mb-4 flex justify-center\",children:[\"List: \",list.name]}),/*#__PURE__*/_jsx(\"ul\",{children:list&&list.movies&&list.movies.map(movie=>/*#__PURE__*/_jsxs(\"li\",{className:\"mb-4 flex justify-between items-center border-x-2 border-y-2 bg-zinc-300 text-2xl  border-black\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[movie.Title,\" (\",movie.Year,\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white p-2 rounded\",onClick:()=>handleDeleteMovie(movie.imdbID),children:\"Remove\"})]},movie.imdbID))})]});};export default ListDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","getLists","deleteMovieFromList","jsx","_jsx","jsxs","_jsxs","ListDetails","id","list","setList","fetchLists","data","selectedList","find","l","_id","handleDeleteMovie","movieId","updatedList","movies","filter","movie","imdbID","window","alert","error","console","children","className","name","map","Title","Year","onClick"],"sources":["C:/Users/KRISHNA KUMAR/OneDrive/Desktop/movie-Library/frontend/src/pages/ListDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getLists, deleteMovieFromList } from '../services/api';\r\n\r\nconst ListDetails = () => {\r\n    const { id } = useParams();\r\n    const [list, setList] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchLists = async () => {\r\n            const data = await getLists();\r\n            const selectedList = data.find((l) => l._id === id);\r\n            setList(selectedList);\r\n        };\r\n        fetchLists();\r\n    }, [id]);\r\n\r\n    const handleDeleteMovie = async (movieId) => {\r\n        try {\r\n            await deleteMovieFromList(id, movieId);\r\n            const updatedList = { ...list }; // Create a copy of the current list\r\n            updatedList.movies = updatedList.movies.filter(movie => movie.imdbID !== movieId); // Remove the movie from the list\r\n            setList(updatedList); // Update the state with the updated list\r\n            window.alert(\"Deleted\");\r\n        } catch (error) {\r\n            console.error('Failed to delete movie:', error);\r\n            window.alert('Failed to delete movie');\r\n        }\r\n    };\r\n\r\n    if (!list) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"p-6 grid justify-center \">\r\n            <h2 className=\"text-3xl mb-4 flex justify-center\">List: {list.name}</h2>\r\n            <ul >\r\n                {list && list.movies && list.movies.map((movie) => (\r\n                    <li key={movie.imdbID} className=\"mb-4 flex justify-between items-center border-x-2 border-y-2 bg-zinc-300 text-2xl  border-black\">\r\n                        <span>{movie.Title} ({movie.Year})</span>\r\n                        \r\n                        <button\r\n                            className=\"bg-red-500 text-white p-2 rounded\"\r\n                            onClick={() => handleDeleteMovie(movie.imdbID)}\r\n                        >\r\n                            Remove\r\n                        </button>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ListDetails;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,QAAQ,CAAEC,mBAAmB,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhE,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAEC,EAAG,CAAC,CAAGR,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAY,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAX,QAAQ,CAAC,CAAC,CAC7B,KAAM,CAAAY,YAAY,CAAGD,IAAI,CAACE,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACC,GAAG,GAAKR,EAAE,CAAC,CACnDE,OAAO,CAACG,YAAY,CAAC,CACzB,CAAC,CACDF,UAAU,CAAC,CAAC,CAChB,CAAC,CAAE,CAACH,EAAE,CAAC,CAAC,CAER,KAAM,CAAAS,iBAAiB,CAAG,KAAO,CAAAC,OAAO,EAAK,CACzC,GAAI,CACA,KAAM,CAAAhB,mBAAmB,CAACM,EAAE,CAAEU,OAAO,CAAC,CACtC,KAAM,CAAAC,WAAW,CAAG,CAAE,GAAGV,IAAK,CAAC,CAAE;AACjCU,WAAW,CAACC,MAAM,CAAGD,WAAW,CAACC,MAAM,CAACC,MAAM,CAACC,KAAK,EAAIA,KAAK,CAACC,MAAM,GAAKL,OAAO,CAAC,CAAE;AACnFR,OAAO,CAACS,WAAW,CAAC,CAAE;AACtBK,MAAM,CAACC,KAAK,CAAC,SAAS,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CF,MAAM,CAACC,KAAK,CAAC,wBAAwB,CAAC,CAC1C,CACJ,CAAC,CAED,GAAI,CAAChB,IAAI,CAAE,mBAAOL,IAAA,QAAAwB,QAAA,CAAK,YAAU,CAAK,CAAC,CAEvC,mBACItB,KAAA,QAAKuB,SAAS,CAAC,0BAA0B,CAAAD,QAAA,eACrCtB,KAAA,OAAIuB,SAAS,CAAC,mCAAmC,CAAAD,QAAA,EAAC,QAAM,CAACnB,IAAI,CAACqB,IAAI,EAAK,CAAC,cACxE1B,IAAA,OAAAwB,QAAA,CACKnB,IAAI,EAAIA,IAAI,CAACW,MAAM,EAAIX,IAAI,CAACW,MAAM,CAACW,GAAG,CAAET,KAAK,eAC1ChB,KAAA,OAAuBuB,SAAS,CAAC,iGAAiG,CAAAD,QAAA,eAC9HtB,KAAA,SAAAsB,QAAA,EAAON,KAAK,CAACU,KAAK,CAAC,IAAE,CAACV,KAAK,CAACW,IAAI,CAAC,GAAC,EAAM,CAAC,cAEzC7B,IAAA,WACIyB,SAAS,CAAC,mCAAmC,CAC7CK,OAAO,CAAEA,CAAA,GAAMjB,iBAAiB,CAACK,KAAK,CAACC,MAAM,CAAE,CAAAK,QAAA,CAClD,QAED,CAAQ,CAAC,GARJN,KAAK,CAACC,MASX,CACP,CAAC,CACF,CAAC,EACJ,CAAC,CAEd,CAAC,CAED,cAAe,CAAAhB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}